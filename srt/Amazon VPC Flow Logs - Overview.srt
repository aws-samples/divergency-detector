1
00:00:01,260 --> 00:00:03,340
Amazon VPC Flow Logs.

2
00:00:04,730 --> 00:00:06,120
VPC Flow Logs

3
00:00:06,120 --> 00:00:07,420
is a feature that enables you

4
00:00:07,420 --> 00:00:10,280
to capture information about the IP traffic going to

5
00:00:10,430 --> 00:00:13,480
and from elastic network interfaces, or ENIs,

6
00:00:13,760 --> 00:00:15,440
in your Amazon VPC.

7
00:00:16,990 --> 00:00:18,790
After you've created a flow log,

8
00:00:18,850 --> 00:00:22,330
you can retrieve and view the generated data in the chosen destination,

9
00:00:22,470 --> 00:00:23,430
which can be either

10
00:00:23,580 --> 00:00:28,510
Amazon CloudWatch Logs or Amazon Simple Storage Service, or Amazon S3.

11
00:00:30,330 --> 00:00:33,480
Flow Logs can help you with a number of repetitive tasks,

12
00:00:33,610 --> 00:00:34,550
such as

13
00:00:35,180 --> 00:00:39,340
diagnosing overly restrictive security group rules, monitoring the

14
00:00:39,340 --> 00:00:42,030
traffic that is reaching your EC2 instance,

15
00:00:43,850 --> 00:00:46,780
determining the direction of your IP traffic flows

16
00:00:46,780 --> 00:00:46,800
to and from your Amazon VPCs, subnets, or ENIs.
determining the direction of your IP traffic flows

17
00:00:46,800 --> 00:00:51,620
to and from your Amazon VPCs, subnets, or ENIs.

18
00:00:52,920 --> 00:00:55,070
VPC Flow Logs - Basics.

19
00:00:55,320 --> 00:00:58,670
You can enable a flow log for your Amazon VPC,

20
00:00:58,860 --> 00:00:59,440
a subnet,

21
00:00:59,540 --> 00:01:00,680
or an ENI.

22
00:01:00,870 --> 00:01:03,980
If you create a flow log at the subnet or VPC level,

23
00:01:04,129 --> 00:01:07,420
each network interface in that subnet or VPC is monitored.

24
00:01:07,630 --> 00:01:09,830
This could generate a lot of flow log data.

25
00:01:11,460 --> 00:01:15,660
Flow log data for a monitored ENI is recorded as flow log records,

26
00:01:15,780 --> 00:01:19,180
which are log events consisting of fields that describe the traffic flow.

27
00:01:20,790 --> 00:01:23,060
To create a flow log, you specify

28
00:01:24,380 --> 00:01:28,270
the resource for which to create the flow log, such as the VPC,

29
00:01:28,420 --> 00:01:29,900
subnet, or ENI,

30
00:01:30,680 --> 00:01:36,080
the type of traffic to capture, accepted traffic, rejected traffic, all traffic,

31
00:01:36,720 --> 00:01:39,820
the destinations to which you want to publish the flow log data,

32
00:01:40,200 --> 00:01:43,320
either Amazon S3 or Amazon CloudWatch Logs.

33
00:01:44,980 --> 00:01:47,620
VPC Flow Logs - Publishing.

34
00:01:48,460 --> 00:01:53,520
Flow Logs can publish flow log data directly to Amazon CloudWatch or Amazon S3.

35
00:01:55,450 --> 00:02:00,000
When sending to CloudWatch Logs, flow log data is published to a log group.

36
00:02:00,730 --> 00:02:04,690
You can create multiple flow logs that publish data to the same log group.

37
00:02:09,760 --> 00:02:10,460
Data from each ENI is sent to a unique log stream in that log group.

38
00:02:10,460 --> 00:02:13,930
Log streams are uniquely named based on the ENI ID

39
00:02:14,110 --> 00:02:15,870
and the type of traffic - all,

40
00:02:16,020 --> 00:02:18,720
reject, or accept - that it is collecting.

41
00:02:19,530 --> 00:02:21,540
When publishing to Amazon S3,

42
00:02:21,690 --> 00:02:24,020
flow log data is delivered to an existing

43
00:02:24,180 --> 00:02:25,490
Amazon S3 bucket,

44
00:02:25,650 --> 00:02:27,470
an optional folder that you specify.

45
00:02:28,590 --> 00:02:31,440
The data is stored as a series of log file objects

46
00:02:31,560 --> 00:02:33,380
that are compressed to save space.

47
00:02:34,880 --> 00:02:37,880
The log file object name includes the flow log ID

48
00:02:38,070 --> 00:02:40,420
and is placed in an S3 folder hierarchy

49
00:02:40,580 --> 00:02:41,220
that includes

50
00:02:41,220 --> 00:02:41,230
AWS account ID,
that includes

51
00:02:41,230 --> 00:02:42,710
AWS account ID,

52
00:02:42,890 --> 00:02:44,300
the AWS Region,

53
00:02:44,510 --> 00:02:45,120
the year,

54
00:02:45,260 --> 00:02:45,910
the month,

55
00:02:46,020 --> 00:02:47,250
and the day of the month.

56
00:02:47,520 --> 00:02:49,870
This makes it easy to query the data with other

57
00:02:49,880 --> 00:02:52,830
AWS services such as Amazon Athena.

