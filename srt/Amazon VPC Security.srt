1
00:00:00,000 --> 00:00:02,520
Amazon Virtual Private Cloud (VPC) -

2
00:00:03,040 --> 00:00:06,120
Network Access Control Lists and Security Groups.

3
00:00:06,160 --> 00:00:09,290
First, let's look at network access control list.

4
00:00:09,300 --> 00:00:13,620
A network access control list is the firewall at the subnet boundary.

5
00:00:13,630 --> 00:00:18,640
Your VPC automatically comes with a modifiable default network ACL.

6
00:00:18,650 --> 00:00:22,890
The default network ACL allows all outbound and inbound traffic.

7
00:00:22,900 --> 00:00:27,000
You can also create a custom network ACL and associate it with a subnet.

8
00:00:27,300 --> 00:00:30,470
Each custom network ACL denies all inbound

9
00:00:30,470 --> 00:00:33,110
and outbound traffic until allow rules are added.

10
00:00:33,450 --> 00:00:36,600
You can associate multiple subnets to a network ACL,

11
00:00:36,620 --> 00:00:40,470
but only one network ACL can be associated with a subnet at a time.

12
00:00:41,340 --> 00:00:45,260
Network ACLs are stateless and require explicit rules

13
00:00:45,280 --> 00:00:47,190
for both inbound and outbound traffic.

14
00:00:47,710 --> 00:00:49,840
It contains a numbered list of rules.

15
00:00:49,960 --> 00:00:51,990
Rules are evaluated in order,

16
00:00:51,990 --> 00:00:54,780
starting with the lowest numbered rule representing the highest

17
00:00:54,780 --> 00:00:57,700
priority to determine whether traffic is allowed or not.

18
00:00:58,300 --> 00:01:02,000
As soon as the traffic matches the rule, the allow or deny rule is applied,

19
00:01:02,150 --> 00:01:03,420
and evaluation ends.

20
00:01:03,730 --> 00:01:06,880
You can configure allow or deny rules to restrict traffic

21
00:01:06,920 --> 00:01:10,600
based on the type of traffic protocol, port range, and source of traffic.

22
00:01:11,630 --> 00:01:12,680
On the other hand,

23
00:01:12,690 --> 00:01:16,360
security group acts as a virtual firewall at the instance level

24
00:01:16,380 --> 00:01:18,180
to control inbound and outbound traffic.

25
00:01:18,380 --> 00:01:24,490
By default, a security group denies all inbound traffic and allows all outbound traffic.

26
00:01:24,540 --> 00:01:26,460
When you create a new security group,

27
00:01:26,470 --> 00:01:29,290
you can define allow rules to control incoming and

28
00:01:29,290 --> 00:01:31,800
outcoming traffic that is allowed to reach the instance.

29
00:01:32,490 --> 00:01:37,730
There is no deny rules required because, by default, it denies all inbound traffic.

30
00:01:37,740 --> 00:01:41,520
Security groups are stateful. Responses to inbound traffic

31
00:01:41,530 --> 00:01:44,130
are automatically allowed to flow out of the instance.

32
00:01:44,140 --> 00:01:45,560
Unlike NACL,

33
00:01:45,580 --> 00:01:48,120
all rules of a security group are evaluated

34
00:01:48,160 --> 00:01:50,360
before deciding whether to allow traffic.

35
00:01:50,360 --> 00:01:52,920
Traffic can be restricted by traffic type,

36
00:01:52,980 --> 00:01:56,010
IP protocol, port range, and traffic source.

37
00:01:56,810 --> 00:02:01,900
Now, let's look at how you can chain security groups together to control traffic in this example.

38
00:02:02,110 --> 00:02:04,400
Most organizations create security groups

39
00:02:04,500 --> 00:02:06,830
with inbound rules for each functional tier.

40
00:02:06,870 --> 00:02:10,720
For example, in this architecture, we have web-tier security group,

41
00:02:10,729 --> 00:02:14,800
application security group, and database security group in each tier.

42
00:02:14,900 --> 00:02:17,430
The inbound rule of the web-tier security group

43
00:02:17,440 --> 00:02:21,700
allows internet traffic from anywhere on HTTPS port 443.

44
00:02:21,960 --> 00:02:23,360
At the application tier,

45
00:02:23,420 --> 00:02:27,010
the inbound rule of the application security group only allows traffic

46
00:02:27,010 --> 00:02:30,450
from the web-tier security group on HTTP port 80.

47
00:02:30,500 --> 00:02:34,130
In other words, it can only accept inbound traffic from the web server,

48
00:02:34,170 --> 00:02:35,170
but nowhere else.

49
00:02:35,790 --> 00:02:36,930
At the data tier,

50
00:02:36,940 --> 00:02:39,980
the inbound rule of the database security group only allows

51
00:02:39,980 --> 00:02:44,450
traffic from the application security group on TCP port 3306,

52
00:02:44,460 --> 00:02:45,480
and nowhere else.

53
00:02:46,000 --> 00:02:48,040
By chaining the security groups together,

54
00:02:48,170 --> 00:02:51,730
you can strictly control the flow of traffic from the top tier to the database.

55
00:02:51,900 --> 00:02:54,680
Even if someone were to hijack the web server somehow,

56
00:02:54,710 --> 00:02:57,590
they still would not be able to access the database directly.

